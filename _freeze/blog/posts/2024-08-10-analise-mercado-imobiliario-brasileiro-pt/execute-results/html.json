{
  "hash": "f2c7e406808a1d72b8fae9f87f0a715f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Analisando Tendências do Mercado Imobiliário Brasileiro com R (Português)\"\nsubtitle: \"Usando dados FipeZap para entender dinâmicas regionais de preços\"\nauthor: \"Equipe EKIO Academy\"\ndate: \"2024-08-10\"\ncategories: [analise-dados, economia-urbana, programacao-r]\nimage: \"mercado-imobiliario-thumbnail.jpg\"\nlang: pt-BR\nformat:\n  html:\n    code-fold: false\n    toc: true\n---\n\n## Introdução\n\nO mercado imobiliário brasileiro passou por significativa volatilidade na última década, com diferenças regionais criando padrões complexos que exigem análise sofisticada. Neste post, exploraremos como usar R e dados FipeZap para entender essas tendências e construir modelos preditivos para movimentos de preços imobiliários.\n\n::: {.callout-note}\n## Fonte de Dados\nEsta análise utiliza índices de preços residenciais FipeZap, que acompanham preços médios de anúncios por metro quadrado nas regiões metropolitanas brasileiras. Os dados são particularmente valiosos para entender tendências de mercado em grandes cidades como São Paulo, Rio de Janeiro e Brasília.\n:::\n\n## Configuração da Análise\n\nPrimeiro, vamos carregar os pacotes necessários e configurar nosso tema EKIO para visualizações profissionais:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Carregar pacotes necessários\nlibrary(tidyverse)\nlibrary(scales)\nlibrary(lubridate)\nlibrary(plotly)\n\n# Carregar sistema de temas EKIO\nsource(here::here(\"assets/r/ekio-themes.R\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n🎨 EKIO Academy Theme System Loaded Successfully!\n═══════════════════════════════════════════════════\nAvailable themes:\n• theme_ekio('academy_primary') - Educational teal [DEFAULT]\n• theme_ekio('modern_premium') - Professional sapphire blue\n• theme_ekio('academic_authority') - Research deep blue\n• theme_ekio('sophisticated_unique') - International cadet blue\n• theme_ekio('institutional_oxford') - Banking oxford blue\n• theme_ekio('premium_steel') - Executive steel blue\n═══════════════════════════════════════════════════\n💡 Pro tip: Use with Brazilian data from geobr, sidrar, GetBCBData\n```\n\n\n:::\n\n```{.r .cell-code}\n# Definir tema para esta análise\ntheme_set(theme_ekio(\"academy_primary\"))\n```\n:::\n\n\n## Importação e Preparação dos Dados\n\nPara esta análise, criaremos um conjunto de dados de amostra que representa padrões típicos de preços imobiliários FipeZap:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Criar dados de preços imobiliários de amostra (na prática, viriam da API FipeZap)\nset.seed(42)\ndatas <- seq(from = as.Date(\"2020-01-01\"), to = as.Date(\"2024-07-01\"), by = \"month\")\n\ndados_imobiliarios <- expand_grid(\n  data = datas,\n  cidade = c(\"São Paulo\", \"Rio de Janeiro\", \"Brasília\", \"Belo Horizonte\", \"Porto Alegre\")\n) |>\n  arrange(cidade, data) |>\n  group_by(cidade) |>\n  mutate(\n    # Simular tendências realistas de preços com padrões específicos por cidade\n    preco_base = case_when(\n      cidade == \"São Paulo\" ~ 8500,\n      cidade == \"Rio de Janeiro\" ~ 7200,\n      cidade == \"Brasília\" ~ 6800,\n      cidade == \"Belo Horizonte\" ~ 5200,\n      cidade == \"Porto Alegre\" ~ 4800\n    ),\n    \n    # Adicionar componentes de tendência e sazonalidade\n    tendencia_temporal = row_number() / n(),\n    sazonal = sin(2 * pi * month(data) / 12) * 200,\n    \n    # Impacto COVID (queda acentuada em 2020, recuperação 2021-2022)\n    impacto_covid = case_when(\n      data >= as.Date(\"2020-03-01\") & data <= as.Date(\"2020-12-01\") ~ -800 * exp(-(as.numeric(data - as.Date(\"2020-03-01\")) / 365) * 2),\n      data >= as.Date(\"2021-01-01\") & data <= as.Date(\"2022-12-01\") ~ 600 * (as.numeric(data - as.Date(\"2021-01-01\")) / 365),\n      TRUE ~ 0\n    ),\n    \n    # Variação aleatória\n    ruido = rnorm(n(), 0, 150),\n    \n    # Cálculo final do preço\n    preco_por_m2 = pmax(3000, preco_base + preco_base * tendencia_temporal * 0.15 + sazonal + impacto_covid + ruido)\n  ) |>\n  ungroup()\n\n# Exibir dados de amostra\ndados_imobiliarios |>\n  slice_head(n = 10) |>\n  select(data, cidade, preco_por_m2) |>\n  knitr::kable(caption = \"Dados de Amostra de Preços Imobiliários Brasileiros (R$/m²)\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Dados de Amostra de Preços Imobiliários Brasileiros (R$/m²)\n\n|data       |cidade         | preco_por_m2|\n|:----------|:--------------|------------:|\n|2020-01-01 |Belo Horizonte |         5520|\n|2020-02-01 |Belo Horizonte |         5317|\n|2020-03-01 |Belo Horizonte |         4697|\n|2020-04-01 |Belo Horizonte |         4850|\n|2020-05-01 |Belo Horizonte |         4859|\n|2020-06-01 |Belo Horizonte |         4786|\n|2020-07-01 |Belo Horizonte |         5016|\n|2020-08-01 |Belo Horizonte |         4780|\n|2020-09-01 |Belo Horizonte |         5139|\n|2020-10-01 |Belo Horizonte |         4912|\n\n\n:::\n:::\n\n\n## Análise Exploratória de Dados\n\nVamos começar examinando tendências gerais de preços nas regiões metropolitanas brasileiras:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Criar visualização abrangente de tendências de preços\ngrafico_tendencias <- dados_imobiliarios |>\n  ggplot(aes(x = data, y = preco_por_m2, color = cidade)) +\n  geom_line(linewidth = 1.1, alpha = 0.8) +\n  geom_smooth(method = \"loess\", se = FALSE, linewidth = 0.8, linetype = \"dashed\") +\n  scale_color_ekio_cat(\"academy_primary\") +\n  scale_y_continuous(\n    labels = scales::dollar_format(prefix = \"R$ \", suffix = \"/m²\", big.mark = \".\"),\n    limits = c(3000, NA)\n  ) +\n  scale_x_date(\n    date_breaks = \"6 months\",\n    date_labels = \"%b\\n%Y\"\n  ) +\n  labs(\n    title = \"Tendências de Preços do Mercado Imobiliário Brasileiro por Região Metropolitana\",\n    subtitle = \"Preços médios de anúncios residenciais mostrando variações regionais e impacto da COVID-19\",\n    x = \"Data\",\n    y = \"Preço por Metro Quadrado (R$/m²)\",\n    color = \"Região Metropolitana\",\n    caption = \"Fonte: Índice de Preços Imobiliários FipeZap | EKIO Analytics\"\n  ) +\n  theme_ekio(\"academy_primary\") +\n  theme(\n    legend.position = \"bottom\",\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  )\n\ngrafico_tendencias\n```\n\n::: {.cell-output-display}\n![](2024-08-10-analise-mercado-imobiliario-brasileiro-pt_files/figure-html/price-trends-1.png){width=1152}\n:::\n:::\n\n\n## Análise Regional de Preços\n\nAgora vamos examinar o desempenho relativo de cada região metropolitana:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calcular índices de preços (base = Janeiro 2020)\nindices_precos <- dados_imobiliarios |>\n  group_by(cidade) |>\n  arrange(data) |>\n  mutate(\n    preco_base = first(preco_por_m2),\n    indice_preco = (preco_por_m2 / preco_base) * 100\n  ) |>\n  ungroup()\n\n# Criar comparação de índices de preços\ngrafico_indices <- indices_precos |>\n  ggplot(aes(x = data, y = indice_preco, fill = cidade)) +\n  geom_area(alpha = 0.7, position = \"identity\") +\n  scale_fill_ekio_cat(\"academy_primary\") +\n  scale_y_continuous(\n    labels = scales::number_format(suffix = \"\"),\n    breaks = seq(80, 130, 10)\n  ) +\n  scale_x_date(date_breaks = \"6 months\", date_labels = \"%b %Y\") +\n  facet_wrap(~cidade, ncol = 3, scales = \"free_y\") +\n  labs(\n    title = \"Índice de Desempenho de Preços Imobiliários por Região Metropolitana\",\n    subtitle = \"Base: Janeiro 2020 = 100. Mostra evolução relativa de preços e padrões de recuperação\",\n    x = \"Data\",\n    y = \"Índice de Preços (Jan 2020 = 100)\",\n    caption = \"Fonte: Índice de Preços Imobiliários FipeZap | EKIO Analytics\"\n  ) +\n  theme_ekio(\"academy_primary\") +\n  theme(\n    legend.position = \"none\",\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    strip.text = element_text(size = 10, color = ekio_academy_colors$primary)\n  )\n\ngrafico_indices\n```\n\n::: {.cell-output-display}\n![](2024-08-10-analise-mercado-imobiliario-brasileiro-pt_files/figure-html/regional-analysis-1.png){width=960}\n:::\n:::\n\n\n## Análise de Volatilidade do Mercado\n\nVamos examinar padrões de volatilidade para entender características de risco:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calcular mudanças mensais de preços\ndados_volatilidade <- dados_imobiliarios |>\n  group_by(cidade) |>\n  arrange(data) |>\n  mutate(\n    mudanca_mensal = (preco_por_m2 / lag(preco_por_m2) - 1) * 100,\n    volatilidade_movel = zoo::rollapply(\n      mudanca_mensal, \n      width = 12, \n      FUN = sd, \n      fill = NA, \n      na.rm = TRUE\n    )\n  ) |>\n  filter(!is.na(volatilidade_movel)) |>\n  ungroup()\n\n# Criar visualização de volatilidade\ngrafico_volatilidade <- dados_volatilidade |>\n  ggplot(aes(x = data, y = volatilidade_movel, color = cidade)) +\n  geom_line(linewidth = 1.1, alpha = 0.8) +\n  geom_hline(\n    yintercept = mean(dados_volatilidade$volatilidade_movel, na.rm = TRUE),\n    linetype = \"dashed\",\n    alpha = 0.6,\n    color = \"gray50\"\n  ) +\n  scale_color_ekio_cat(\"academy_primary\") +\n  scale_y_continuous(labels = scales::percent_format(scale = 1, suffix = \"%\")) +\n  scale_x_date(date_breaks = \"6 months\", date_labels = \"%b\\n%Y\") +\n  labs(\n    title = \"Análise de Volatilidade do Mercado Imobiliário\",\n    subtitle = \"Desvio padrão móvel de 12 meses das mudanças mensais de preços\",\n    x = \"Data\",\n    y = \"Volatilidade de Preços (% por mês)\",\n    color = \"Região Metropolitana\",\n    caption = \"Fonte: Índice de Preços Imobiliários FipeZap | EKIO Analytics\"\n  ) +\n  theme_ekio(\"academy_primary\") +\n  theme(\n    legend.position = \"bottom\",\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  )\n\ngrafico_volatilidade\n```\n\n::: {.cell-output-display}\n![](2024-08-10-analise-mercado-imobiliario-brasileiro-pt_files/figure-html/volatility-analysis-1.png){width=1152}\n:::\n:::\n\n\n## Principais Insights e Implicações\n\nCom base em nossa análise dos dados do mercado imobiliário brasileiro, vários padrões importantes emergem:\n\n### 1. Divergência Regional\n- **São Paulo** mantém posição como mercado mais caro, mas mostra menor volatilidade\n- **Rio de Janeiro** experimentou correções significativas durante período COVID\n- **Brasília** demonstra crescimento estável com volatilidade moderada\n- Mercados secundários (**Belo Horizonte**, **Porto Alegre**) mostram padrões distintos de recuperação\n\n### 2. Avaliação do Impacto da COVID-19\nO impacto da pandemia variou significativamente entre regiões metropolitanas:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calcular resumo do impacto COVID\nresumo_covid <- dados_imobiliarios |>\n  filter(data %in% c(as.Date(\"2020-01-01\"), as.Date(\"2020-12-01\"), as.Date(\"2024-07-01\"))) |>\n  group_by(cidade) |>\n  arrange(data) |>\n  summarise(\n    pre_covid = first(preco_por_m2),\n    vale_covid = preco_por_m2[2],\n    preco_atual = last(preco_por_m2),\n    declinio_covid = (vale_covid / pre_covid - 1) * 100,\n    taxa_recuperacao = (preco_atual / vale_covid - 1) * 100,\n    .groups = \"drop\"\n  ) |>\n  arrange(desc(preco_atual))\n\nresumo_covid |>\n  mutate(\n    across(c(pre_covid, vale_covid, preco_atual), ~scales::dollar(.x, prefix = \"R$ \", suffix = \"/m²\", big.mark = \".\")),\n    across(c(declinio_covid, taxa_recuperacao), ~scales::percent(.x, scale = 1, accuracy = 0.1))\n  ) |>\n  knitr::kable(\n    caption = \"Análise de Impacto e Recuperação da COVID-19 por Região Metropolitana\",\n    col.names = c(\"Cidade\", \"Pré-COVID\", \"Vale COVID\", \"Atual\", \"Declínio (%)\", \"Recuperação (%)\")\n  )\n```\n\n::: {.cell-output-display}\n\n\nTable: Análise de Impacto e Recuperação da COVID-19 por Região Metropolitana\n\n|Cidade         |Pré-COVID      |Vale COVID     |Atual          |Declínio (%) |Recuperação (%) |\n|:--------------|:--------------|:--------------|:--------------|:------------|:---------------|\n|São Paulo      |R$ 8.681.03/m² |R$ 8.743.09/m² |R$ 9.615.52/m² |0.7%         |10.0%           |\n|Rio de Janeiro |R$ 7.534.50/m² |R$ 7.041.00/m² |R$ 7.987.46/m² |-6.5%        |13.4%           |\n|Brasília       |R$ 6.960.03/m² |R$ 6.895.64/m² |R$ 7.737.87/m² |-0.9%        |12.2%           |\n|Belo Horizonte |R$ 5.519.83/m² |R$ 5.535.89/m² |R$ 5.893.46/m² |0.3%         |6.5%            |\n|Porto Alegre   |R$ 4.909.33/m² |R$ 4.559.24/m² |R$ 5.508.50/m² |-7.1%        |20.8%           |\n\n\n:::\n:::\n\n\n### 3. Implicações para Investimentos\n\nPara investidores imobiliários e formuladores de políticas, nossa análise sugere:\n\n- **Benefícios de Diversificação**: Mercados regionais mostram diferentes perfis risco-retorno\n- **Padrões de Recuperação**: Mercados com fundamentos mais sólidos (São Paulo, Brasília) mostraram recuperação mais rápida\n- **Gestão de Volatilidade**: Mercados secundários podem oferecer melhores retornos ajustados ao risco\n- **Implicações Políticas**: Políticas habitacionais regionais devem considerar dinâmicas locais de mercado\n\n## Metodologia e Considerações sobre os Dados\n\n::: {.callout-warning}\n## Notas Importantes\n- Esta análise usa dados simulados para fins de demonstração\n- Dados reais do FipeZap exigiriam acesso à API e licenciamento adequado\n- Análise de mercado deve incorporar fatores adicionais como taxas de juros, emprego e restrições de oferta\n- Fundamentos econômicos regionais impactam significativamente dinâmicas do mercado imobiliário\n:::\n\n## Próximos Passos\n\nPara estender esta análise para consultoria profissional ou pesquisa:\n\n1. **Integrar Fontes de Dados Reais**: Acessar API FipeZap para dados reais de mercado\n2. **Adicionar Variáveis Macroeconômicas**: Incluir taxas de juros, emprego, crescimento do PIB\n3. **Análise Espacial**: Incorporar agrupamentos geográficos e efeitos de vizinhança\n4. **Modelagem Preditiva**: Desenvolver modelos de previsão para movimentos de preços\n5. **Avaliação de Impacto Político**: Avaliar efetividade de políticas habitacionais\n\n## Conclusão\n\nOs mercados imobiliários brasileiros demonstram padrões regionais complexos que exigem abordagens analíticas sofisticadas. Usando R e técnicas de visualização profissional, podemos descobrir insights significativos para decisões de investimento, desenvolvimento de políticas e compreensão de mercado.\n\nA abordagem EKIO combina análise estatística rigorosa com implementação prática, garantindo que dados econômicos complexos se tornem inteligência acionável para tomadores de decisão em mercados urbanos brasileiros.\n\n---\n\n*Esta análise demonstra metodologias ensinadas no curso de Analytics Urbana Avançada da EKIO Academy. Para serviços profissionais de análise do mercado imobiliário, entre em contato com [EKIO Analytics](https://ekio.com.br).*",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}