{
  "hash": "f2c7e406808a1d72b8fae9f87f0a715f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Analisando Tend√™ncias do Mercado Imobili√°rio Brasileiro com R (Portugu√™s)\"\nsubtitle: \"Usando dados FipeZap para entender din√¢micas regionais de pre√ßos\"\nauthor: \"Equipe EKIO Academy\"\ndate: \"2024-08-10\"\ncategories: [analise-dados, economia-urbana, programacao-r]\nimage: \"mercado-imobiliario-thumbnail.jpg\"\nlang: pt-BR\nformat:\n  html:\n    code-fold: false\n    toc: true\n---\n\n## Introdu√ß√£o\n\nO mercado imobili√°rio brasileiro passou por significativa volatilidade na √∫ltima d√©cada, com diferen√ßas regionais criando padr√µes complexos que exigem an√°lise sofisticada. Neste post, exploraremos como usar R e dados FipeZap para entender essas tend√™ncias e construir modelos preditivos para movimentos de pre√ßos imobili√°rios.\n\n::: {.callout-note}\n## Fonte de Dados\nEsta an√°lise utiliza √≠ndices de pre√ßos residenciais FipeZap, que acompanham pre√ßos m√©dios de an√∫ncios por metro quadrado nas regi√µes metropolitanas brasileiras. Os dados s√£o particularmente valiosos para entender tend√™ncias de mercado em grandes cidades como S√£o Paulo, Rio de Janeiro e Bras√≠lia.\n:::\n\n## Configura√ß√£o da An√°lise\n\nPrimeiro, vamos carregar os pacotes necess√°rios e configurar nosso tema EKIO para visualiza√ß√µes profissionais:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Carregar pacotes necess√°rios\nlibrary(tidyverse)\nlibrary(scales)\nlibrary(lubridate)\nlibrary(plotly)\n\n# Carregar sistema de temas EKIO\nsource(here::here(\"assets/r/ekio-themes.R\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nüé® EKIO Academy Theme System Loaded Successfully!\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\nAvailable themes:\n‚Ä¢ theme_ekio('academy_primary') - Educational teal [DEFAULT]\n‚Ä¢ theme_ekio('modern_premium') - Professional sapphire blue\n‚Ä¢ theme_ekio('academic_authority') - Research deep blue\n‚Ä¢ theme_ekio('sophisticated_unique') - International cadet blue\n‚Ä¢ theme_ekio('institutional_oxford') - Banking oxford blue\n‚Ä¢ theme_ekio('premium_steel') - Executive steel blue\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\nüí° Pro tip: Use with Brazilian data from geobr, sidrar, GetBCBData\n```\n\n\n:::\n\n```{.r .cell-code}\n# Definir tema para esta an√°lise\ntheme_set(theme_ekio(\"academy_primary\"))\n```\n:::\n\n\n## Importa√ß√£o e Prepara√ß√£o dos Dados\n\nPara esta an√°lise, criaremos um conjunto de dados de amostra que representa padr√µes t√≠picos de pre√ßos imobili√°rios FipeZap:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Criar dados de pre√ßos imobili√°rios de amostra (na pr√°tica, viriam da API FipeZap)\nset.seed(42)\ndatas <- seq(from = as.Date(\"2020-01-01\"), to = as.Date(\"2024-07-01\"), by = \"month\")\n\ndados_imobiliarios <- expand_grid(\n  data = datas,\n  cidade = c(\"S√£o Paulo\", \"Rio de Janeiro\", \"Bras√≠lia\", \"Belo Horizonte\", \"Porto Alegre\")\n) |>\n  arrange(cidade, data) |>\n  group_by(cidade) |>\n  mutate(\n    # Simular tend√™ncias realistas de pre√ßos com padr√µes espec√≠ficos por cidade\n    preco_base = case_when(\n      cidade == \"S√£o Paulo\" ~ 8500,\n      cidade == \"Rio de Janeiro\" ~ 7200,\n      cidade == \"Bras√≠lia\" ~ 6800,\n      cidade == \"Belo Horizonte\" ~ 5200,\n      cidade == \"Porto Alegre\" ~ 4800\n    ),\n    \n    # Adicionar componentes de tend√™ncia e sazonalidade\n    tendencia_temporal = row_number() / n(),\n    sazonal = sin(2 * pi * month(data) / 12) * 200,\n    \n    # Impacto COVID (queda acentuada em 2020, recupera√ß√£o 2021-2022)\n    impacto_covid = case_when(\n      data >= as.Date(\"2020-03-01\") & data <= as.Date(\"2020-12-01\") ~ -800 * exp(-(as.numeric(data - as.Date(\"2020-03-01\")) / 365) * 2),\n      data >= as.Date(\"2021-01-01\") & data <= as.Date(\"2022-12-01\") ~ 600 * (as.numeric(data - as.Date(\"2021-01-01\")) / 365),\n      TRUE ~ 0\n    ),\n    \n    # Varia√ß√£o aleat√≥ria\n    ruido = rnorm(n(), 0, 150),\n    \n    # C√°lculo final do pre√ßo\n    preco_por_m2 = pmax(3000, preco_base + preco_base * tendencia_temporal * 0.15 + sazonal + impacto_covid + ruido)\n  ) |>\n  ungroup()\n\n# Exibir dados de amostra\ndados_imobiliarios |>\n  slice_head(n = 10) |>\n  select(data, cidade, preco_por_m2) |>\n  knitr::kable(caption = \"Dados de Amostra de Pre√ßos Imobili√°rios Brasileiros (R$/m¬≤)\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Dados de Amostra de Pre√ßos Imobili√°rios Brasileiros (R$/m¬≤)\n\n|data       |cidade         | preco_por_m2|\n|:----------|:--------------|------------:|\n|2020-01-01 |Belo Horizonte |         5520|\n|2020-02-01 |Belo Horizonte |         5317|\n|2020-03-01 |Belo Horizonte |         4697|\n|2020-04-01 |Belo Horizonte |         4850|\n|2020-05-01 |Belo Horizonte |         4859|\n|2020-06-01 |Belo Horizonte |         4786|\n|2020-07-01 |Belo Horizonte |         5016|\n|2020-08-01 |Belo Horizonte |         4780|\n|2020-09-01 |Belo Horizonte |         5139|\n|2020-10-01 |Belo Horizonte |         4912|\n\n\n:::\n:::\n\n\n## An√°lise Explorat√≥ria de Dados\n\nVamos come√ßar examinando tend√™ncias gerais de pre√ßos nas regi√µes metropolitanas brasileiras:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Criar visualiza√ß√£o abrangente de tend√™ncias de pre√ßos\ngrafico_tendencias <- dados_imobiliarios |>\n  ggplot(aes(x = data, y = preco_por_m2, color = cidade)) +\n  geom_line(linewidth = 1.1, alpha = 0.8) +\n  geom_smooth(method = \"loess\", se = FALSE, linewidth = 0.8, linetype = \"dashed\") +\n  scale_color_ekio_cat(\"academy_primary\") +\n  scale_y_continuous(\n    labels = scales::dollar_format(prefix = \"R$ \", suffix = \"/m¬≤\", big.mark = \".\"),\n    limits = c(3000, NA)\n  ) +\n  scale_x_date(\n    date_breaks = \"6 months\",\n    date_labels = \"%b\\n%Y\"\n  ) +\n  labs(\n    title = \"Tend√™ncias de Pre√ßos do Mercado Imobili√°rio Brasileiro por Regi√£o Metropolitana\",\n    subtitle = \"Pre√ßos m√©dios de an√∫ncios residenciais mostrando varia√ß√µes regionais e impacto da COVID-19\",\n    x = \"Data\",\n    y = \"Pre√ßo por Metro Quadrado (R$/m¬≤)\",\n    color = \"Regi√£o Metropolitana\",\n    caption = \"Fonte: √çndice de Pre√ßos Imobili√°rios FipeZap | EKIO Analytics\"\n  ) +\n  theme_ekio(\"academy_primary\") +\n  theme(\n    legend.position = \"bottom\",\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  )\n\ngrafico_tendencias\n```\n\n::: {.cell-output-display}\n![](2024-08-10-analise-mercado-imobiliario-brasileiro-pt_files/figure-html/price-trends-1.png){width=1152}\n:::\n:::\n\n\n## An√°lise Regional de Pre√ßos\n\nAgora vamos examinar o desempenho relativo de cada regi√£o metropolitana:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calcular √≠ndices de pre√ßos (base = Janeiro 2020)\nindices_precos <- dados_imobiliarios |>\n  group_by(cidade) |>\n  arrange(data) |>\n  mutate(\n    preco_base = first(preco_por_m2),\n    indice_preco = (preco_por_m2 / preco_base) * 100\n  ) |>\n  ungroup()\n\n# Criar compara√ß√£o de √≠ndices de pre√ßos\ngrafico_indices <- indices_precos |>\n  ggplot(aes(x = data, y = indice_preco, fill = cidade)) +\n  geom_area(alpha = 0.7, position = \"identity\") +\n  scale_fill_ekio_cat(\"academy_primary\") +\n  scale_y_continuous(\n    labels = scales::number_format(suffix = \"\"),\n    breaks = seq(80, 130, 10)\n  ) +\n  scale_x_date(date_breaks = \"6 months\", date_labels = \"%b %Y\") +\n  facet_wrap(~cidade, ncol = 3, scales = \"free_y\") +\n  labs(\n    title = \"√çndice de Desempenho de Pre√ßos Imobili√°rios por Regi√£o Metropolitana\",\n    subtitle = \"Base: Janeiro 2020 = 100. Mostra evolu√ß√£o relativa de pre√ßos e padr√µes de recupera√ß√£o\",\n    x = \"Data\",\n    y = \"√çndice de Pre√ßos (Jan 2020 = 100)\",\n    caption = \"Fonte: √çndice de Pre√ßos Imobili√°rios FipeZap | EKIO Analytics\"\n  ) +\n  theme_ekio(\"academy_primary\") +\n  theme(\n    legend.position = \"none\",\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    strip.text = element_text(size = 10, color = ekio_academy_colors$primary)\n  )\n\ngrafico_indices\n```\n\n::: {.cell-output-display}\n![](2024-08-10-analise-mercado-imobiliario-brasileiro-pt_files/figure-html/regional-analysis-1.png){width=960}\n:::\n:::\n\n\n## An√°lise de Volatilidade do Mercado\n\nVamos examinar padr√µes de volatilidade para entender caracter√≠sticas de risco:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calcular mudan√ßas mensais de pre√ßos\ndados_volatilidade <- dados_imobiliarios |>\n  group_by(cidade) |>\n  arrange(data) |>\n  mutate(\n    mudanca_mensal = (preco_por_m2 / lag(preco_por_m2) - 1) * 100,\n    volatilidade_movel = zoo::rollapply(\n      mudanca_mensal, \n      width = 12, \n      FUN = sd, \n      fill = NA, \n      na.rm = TRUE\n    )\n  ) |>\n  filter(!is.na(volatilidade_movel)) |>\n  ungroup()\n\n# Criar visualiza√ß√£o de volatilidade\ngrafico_volatilidade <- dados_volatilidade |>\n  ggplot(aes(x = data, y = volatilidade_movel, color = cidade)) +\n  geom_line(linewidth = 1.1, alpha = 0.8) +\n  geom_hline(\n    yintercept = mean(dados_volatilidade$volatilidade_movel, na.rm = TRUE),\n    linetype = \"dashed\",\n    alpha = 0.6,\n    color = \"gray50\"\n  ) +\n  scale_color_ekio_cat(\"academy_primary\") +\n  scale_y_continuous(labels = scales::percent_format(scale = 1, suffix = \"%\")) +\n  scale_x_date(date_breaks = \"6 months\", date_labels = \"%b\\n%Y\") +\n  labs(\n    title = \"An√°lise de Volatilidade do Mercado Imobili√°rio\",\n    subtitle = \"Desvio padr√£o m√≥vel de 12 meses das mudan√ßas mensais de pre√ßos\",\n    x = \"Data\",\n    y = \"Volatilidade de Pre√ßos (% por m√™s)\",\n    color = \"Regi√£o Metropolitana\",\n    caption = \"Fonte: √çndice de Pre√ßos Imobili√°rios FipeZap | EKIO Analytics\"\n  ) +\n  theme_ekio(\"academy_primary\") +\n  theme(\n    legend.position = \"bottom\",\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  )\n\ngrafico_volatilidade\n```\n\n::: {.cell-output-display}\n![](2024-08-10-analise-mercado-imobiliario-brasileiro-pt_files/figure-html/volatility-analysis-1.png){width=1152}\n:::\n:::\n\n\n## Principais Insights e Implica√ß√µes\n\nCom base em nossa an√°lise dos dados do mercado imobili√°rio brasileiro, v√°rios padr√µes importantes emergem:\n\n### 1. Diverg√™ncia Regional\n- **S√£o Paulo** mant√©m posi√ß√£o como mercado mais caro, mas mostra menor volatilidade\n- **Rio de Janeiro** experimentou corre√ß√µes significativas durante per√≠odo COVID\n- **Bras√≠lia** demonstra crescimento est√°vel com volatilidade moderada\n- Mercados secund√°rios (**Belo Horizonte**, **Porto Alegre**) mostram padr√µes distintos de recupera√ß√£o\n\n### 2. Avalia√ß√£o do Impacto da COVID-19\nO impacto da pandemia variou significativamente entre regi√µes metropolitanas:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calcular resumo do impacto COVID\nresumo_covid <- dados_imobiliarios |>\n  filter(data %in% c(as.Date(\"2020-01-01\"), as.Date(\"2020-12-01\"), as.Date(\"2024-07-01\"))) |>\n  group_by(cidade) |>\n  arrange(data) |>\n  summarise(\n    pre_covid = first(preco_por_m2),\n    vale_covid = preco_por_m2[2],\n    preco_atual = last(preco_por_m2),\n    declinio_covid = (vale_covid / pre_covid - 1) * 100,\n    taxa_recuperacao = (preco_atual / vale_covid - 1) * 100,\n    .groups = \"drop\"\n  ) |>\n  arrange(desc(preco_atual))\n\nresumo_covid |>\n  mutate(\n    across(c(pre_covid, vale_covid, preco_atual), ~scales::dollar(.x, prefix = \"R$ \", suffix = \"/m¬≤\", big.mark = \".\")),\n    across(c(declinio_covid, taxa_recuperacao), ~scales::percent(.x, scale = 1, accuracy = 0.1))\n  ) |>\n  knitr::kable(\n    caption = \"An√°lise de Impacto e Recupera√ß√£o da COVID-19 por Regi√£o Metropolitana\",\n    col.names = c(\"Cidade\", \"Pr√©-COVID\", \"Vale COVID\", \"Atual\", \"Decl√≠nio (%)\", \"Recupera√ß√£o (%)\")\n  )\n```\n\n::: {.cell-output-display}\n\n\nTable: An√°lise de Impacto e Recupera√ß√£o da COVID-19 por Regi√£o Metropolitana\n\n|Cidade         |Pr√©-COVID      |Vale COVID     |Atual          |Decl√≠nio (%) |Recupera√ß√£o (%) |\n|:--------------|:--------------|:--------------|:--------------|:------------|:---------------|\n|S√£o Paulo      |R$ 8.681.03/m¬≤ |R$ 8.743.09/m¬≤ |R$ 9.615.52/m¬≤ |0.7%         |10.0%           |\n|Rio de Janeiro |R$ 7.534.50/m¬≤ |R$ 7.041.00/m¬≤ |R$ 7.987.46/m¬≤ |-6.5%        |13.4%           |\n|Bras√≠lia       |R$ 6.960.03/m¬≤ |R$ 6.895.64/m¬≤ |R$ 7.737.87/m¬≤ |-0.9%        |12.2%           |\n|Belo Horizonte |R$ 5.519.83/m¬≤ |R$ 5.535.89/m¬≤ |R$ 5.893.46/m¬≤ |0.3%         |6.5%            |\n|Porto Alegre   |R$ 4.909.33/m¬≤ |R$ 4.559.24/m¬≤ |R$ 5.508.50/m¬≤ |-7.1%        |20.8%           |\n\n\n:::\n:::\n\n\n### 3. Implica√ß√µes para Investimentos\n\nPara investidores imobili√°rios e formuladores de pol√≠ticas, nossa an√°lise sugere:\n\n- **Benef√≠cios de Diversifica√ß√£o**: Mercados regionais mostram diferentes perfis risco-retorno\n- **Padr√µes de Recupera√ß√£o**: Mercados com fundamentos mais s√≥lidos (S√£o Paulo, Bras√≠lia) mostraram recupera√ß√£o mais r√°pida\n- **Gest√£o de Volatilidade**: Mercados secund√°rios podem oferecer melhores retornos ajustados ao risco\n- **Implica√ß√µes Pol√≠ticas**: Pol√≠ticas habitacionais regionais devem considerar din√¢micas locais de mercado\n\n## Metodologia e Considera√ß√µes sobre os Dados\n\n::: {.callout-warning}\n## Notas Importantes\n- Esta an√°lise usa dados simulados para fins de demonstra√ß√£o\n- Dados reais do FipeZap exigiriam acesso √† API e licenciamento adequado\n- An√°lise de mercado deve incorporar fatores adicionais como taxas de juros, emprego e restri√ß√µes de oferta\n- Fundamentos econ√¥micos regionais impactam significativamente din√¢micas do mercado imobili√°rio\n:::\n\n## Pr√≥ximos Passos\n\nPara estender esta an√°lise para consultoria profissional ou pesquisa:\n\n1. **Integrar Fontes de Dados Reais**: Acessar API FipeZap para dados reais de mercado\n2. **Adicionar Vari√°veis Macroecon√¥micas**: Incluir taxas de juros, emprego, crescimento do PIB\n3. **An√°lise Espacial**: Incorporar agrupamentos geogr√°ficos e efeitos de vizinhan√ßa\n4. **Modelagem Preditiva**: Desenvolver modelos de previs√£o para movimentos de pre√ßos\n5. **Avalia√ß√£o de Impacto Pol√≠tico**: Avaliar efetividade de pol√≠ticas habitacionais\n\n## Conclus√£o\n\nOs mercados imobili√°rios brasileiros demonstram padr√µes regionais complexos que exigem abordagens anal√≠ticas sofisticadas. Usando R e t√©cnicas de visualiza√ß√£o profissional, podemos descobrir insights significativos para decis√µes de investimento, desenvolvimento de pol√≠ticas e compreens√£o de mercado.\n\nA abordagem EKIO combina an√°lise estat√≠stica rigorosa com implementa√ß√£o pr√°tica, garantindo que dados econ√¥micos complexos se tornem intelig√™ncia acion√°vel para tomadores de decis√£o em mercados urbanos brasileiros.\n\n---\n\n*Esta an√°lise demonstra metodologias ensinadas no curso de Analytics Urbana Avan√ßada da EKIO Academy. Para servi√ßos profissionais de an√°lise do mercado imobili√°rio, entre em contato com [EKIO Analytics](https://ekio.com.br).*",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}