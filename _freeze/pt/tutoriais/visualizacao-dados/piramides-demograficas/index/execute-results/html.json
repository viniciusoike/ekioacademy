{
  "hash": "f2e5c37a9c839878759b232547326a59",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Pirâmides Demográficas no R\"\nsubtitle: \"Visualizando Estrutura Etária e de Gênero da População\"\ndescription: \"Aprenda a criar pirâmides demográficas usando ggplot2 para visualizar estrutura populacional, fornecendo insights sobre tendências e padrões demográficos.\"\nauthor: \"Equipe EKIO Academy\"\ndate: \"2024-01-20\"\ncategories: [visualizacao-dados, ggplot2, demografia, dados-brasileiros]\nlang: pt\nformat:\n  html:\n    code-fold: false\n    toc: true\n    fig-width: 8\n    fig-height: 6\nexecute:\n  warning: false\n  message: false\n---\n\n\n\n# Introdução às Pirâmides Demográficas\n\nUma **pirâmide demográfica** é uma representação gráfica da distribuição etária e de gênero de uma população. Tipicamente mostra a população em barras horizontais, com homens representados à esquerda e mulheres à direita. Cada barra representa um grupo etário específico, e o comprimento da barra indica o número de pessoas naquele grupo.\n\nAs pirâmides demográficas são amplamente utilizadas em análises demográficas para visualizar a estrutura de uma população, fornecendo insights valiosos sobre tendências como crescimento populacional, envelhecimento e distribuição de gênero.\n\nEssas pirâmides são cruciais para entender as dinâmicas socioeconômicas de um país, pois destacam as proporções de populações jovens versus idosas e revelam padrões relacionados a taxas de fertilidade, expectativa de vida e migração.\n\nAo analisar pirâmides demográficas, formuladores de políticas, empresas e pesquisadores podem tomar decisões informadas relacionadas à saúde, educação e planejamento da força de trabalho.\n\n## Pacotes Necessários\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(stringr)\nlibrary(showtext)\n\n# Opcional para melhor plotagem\nfont_add_google(\"Open Sans\", \"Open Sans\")\nshowtext_auto()\n```\n:::\n\n\n## Criação de Dados Exemplo\n\nComo dados demográficos podem ser sensíveis ao acesso, criaremos dados amostrais realistas que demonstram os conceitos principais da criação de pirâmides demográficas:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Criar dados demográficos amostrais para estrutura populacional tipo Brasil\nset.seed(42)\n\ncreate_demo_data <- function(country, year, pattern = \"young\") {\n  # Grupos etários\n  age_groups <- c(\"0-4\", \"5-9\", \"10-14\", \"15-19\", \"20-24\", \"25-29\", \"30-34\", \n                  \"35-39\", \"40-44\", \"45-49\", \"50-54\", \"55-59\", \"60-64\", \n                  \"65-69\", \"70-74\", \"75-79\", \"80-84\", \"85+\")\n  \n  # Criar diferentes padrões populacionais\n  if (pattern == \"young\") {\n    # População jovem - país em desenvolvimento típico\n    base_pop <- c(8.5, 8.2, 7.8, 7.5, 7.0, 6.8, 6.5, 6.2, 5.8, 5.5, \n                  5.0, 4.5, 4.0, 3.5, 2.8, 2.0, 1.2, 0.7)\n  } else if (pattern == \"aging\") {\n    # População envelhecida - país desenvolvido\n    base_pop <- c(4.5, 4.8, 5.2, 5.5, 5.8, 6.2, 6.8, 7.2, 7.5, 7.0,\n                  6.5, 6.2, 5.8, 5.5, 5.0, 4.2, 3.0, 1.8)\n  } else {\n    # População balanceada\n    base_pop <- c(6.5, 6.2, 6.0, 6.5, 7.0, 7.2, 7.0, 6.8, 6.5, 6.0,\n                  5.5, 5.0, 4.5, 4.0, 3.5, 2.5, 1.5, 0.8)\n  }\n  \n  # Adicionar variação aleatória\n  male_pop <- base_pop + rnorm(length(base_pop), 0, 0.2)\n  female_pop <- base_pop + rnorm(length(base_pop), 0, 0.2)\n  \n  # Garantir valores positivos\n  male_pop <- pmax(male_pop, 0.1)\n  female_pop <- pmax(female_pop, 0.1)\n  \n  # Criar data frame\n  data.frame(\n    country = country,\n    year = year,\n    age_group = rep(age_groups, 2),\n    sex = rep(c(\"Male\", \"Female\"), each = length(age_groups)),\n    population = c(male_pop, female_pop)\n  )\n}\n\n# Criar dados amostrais para diferentes países e anos\nbrazil_1990 <- create_demo_data(\"Brasil\", 1990, \"young\")\nbrazil_2020 <- create_demo_data(\"Brasil\", 2020, \"balanced\")\njapan_2020 <- create_demo_data(\"Japão\", 2020, \"aging\")\n\n# Combinar dados\ndemo_data <- bind_rows(brazil_1990, brazil_2020, japan_2020)\n\n# Processar os dados para plotagem da pirâmide\ndemo_data <- demo_data |>\n  mutate(\n    sex = case_when(\n      sex == \"Male\" ~ \"Masculino\",\n      sex == \"Female\" ~ \"Feminino\"\n    ),\n    sex = factor(sex, levels = c(\"Masculino\", \"Feminino\")),\n    age_group = factor(age_group, levels = c(\"0-4\", \"5-9\", \"10-14\", \"15-19\", \"20-24\", \n                                           \"25-29\", \"30-34\", \"35-39\", \"40-44\", \"45-49\", \n                                           \"50-54\", \"55-59\", \"60-64\", \"65-69\", \"70-74\", \n                                           \"75-79\", \"80-84\", \"85+\"))\n  ) |>\n  group_by(country, year) |>\n  mutate(\n    share = population / sum(population) * 100,\n    share = if_else(sex == \"Masculino\", -share, share)\n  ) |>\n  ungroup()\n```\n:::\n\n\n## Pirâmide Demográfica Básica\n\nVamos começar com uma pirâmide populacional básica usando dados demográficos do Brasil de 1990. Cada barra mostra que porcentagem da população total pertence a um grupo etário e sexo específico.\n\nA visualização é chamada de \"pirâmide\" devido à sua forma distintiva: larga na base (muitos jovens), gradualmente estreitando pelas idades médias (menos adultos) e menor no topo (muito poucos idosos). Esta forma triangular era típica da maioria dos países no passado e ainda é comum em nações em desenvolvimento.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filtrar dados para Brasil 1990\nbrazil_90 <- demo_data |> \n  filter(country == \"Brasil\", year == 1990)\n\n# Gráfico básico da pirâmide\nggplot(brazil_90, aes(x = age_group, y = share)) +\n  geom_col(aes(fill = sex, color = sex)) +\n  coord_flip() +\n  guides(fill = \"none\", color = \"none\") +\n  scale_y_continuous(\n    breaks = seq(-8, 8, 2),\n    labels = c(\"8\", \"6\", \"4\", \"2\", \"0\", \"2\", \"4\", \"6\", \"8\")\n  ) +\n  labs(x = \"Grupo Etário\", y = \"Participação da População (%)\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=768}\n:::\n:::\n\n\n## Pirâmide Melhorada com Cores e Rótulos\n\nVamos melhorar nossa pirâmide com melhores cores e rótulos explicativos. Para representação de gênero, usaremos verde para homens e roxo para mulheres, evitando estereótipos tradicionais enquanto garantimos que as cores sejam claramente distinguíveis e acessíveis.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolors <- c(\"#1B9E77\", \"#7570B3\")  # Verde para homens, roxo para mulheres\nfont <- \"Open Sans\"\n\nggplot(brazil_90, aes(x = age_group, y = share)) +\n  geom_col(aes(fill = sex, color = sex)) +\n  coord_flip() +\n  guides(fill = \"none\", color = \"none\") +\n  geom_hline(yintercept = 0, color = \"black\", linewidth = 0.5) +\n  annotate(\n    \"text\",\n    x = 16,\n    y = -6,\n    label = \"Masculino\",\n    color = colors[1],\n    family = font,\n    size = 4,\n    fontface = \"bold\"\n  ) +\n  annotate(\n    \"text\",\n    x = 16,\n    y = 6,\n    label = \"Feminino\",\n    color = colors[2],\n    family = font,\n    size = 4,\n    fontface = \"bold\"\n  ) +\n  scale_y_continuous(\n    breaks = seq(-8, 8, 2),\n    labels = c(\"8\", \"6\", \"4\", \"2\", \"0\", \"2\", \"4\", \"6\", \"8\")\n  ) +\n  scale_color_manual(values = colors) +\n  scale_fill_manual(values = colors) +\n  labs(\n    title = \"Pirâmide Populacional do Brasil - 1990\",\n    x = \"Grupo Etário\", \n    y = \"Participação da População (%)\"\n  ) +\n  theme_minimal(base_size = 12, base_family = font) +\n  theme(\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_line(linetype = 2, color = \"grey70\"),\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\")\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=768}\n:::\n:::\n\n\n## Comparação Temporal\n\nUm dos usos mais poderosos das pirâmides demográficas é mostrar como a estrutura populacional muda ao longo do tempo. Vamos comparar o Brasil em 1990 versus 2020:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Comparar Brasil ao longo dos períodos\nbrazil_comparison <- demo_data |> \n  filter(country == \"Brasil\")\n\nggplot(brazil_comparison, aes(x = age_group, y = share)) +\n  geom_col(aes(fill = sex, color = sex)) +\n  coord_flip() +\n  facet_wrap(~ year, labeller = label_both) +\n  guides(fill = \"none\", color = \"none\") +\n  geom_hline(yintercept = 0, color = \"black\", linewidth = 0.3) +\n  scale_y_continuous(\n    breaks = seq(-8, 8, 4),\n    labels = c(\"8\", \"4\", \"0\", \"4\", \"8\")\n  ) +\n  scale_color_manual(values = colors) +\n  scale_fill_manual(values = colors) +\n  labs(\n    title = \"Transição Demográfica do Brasil: 1990 vs 2020\",\n    x = \"Grupo Etário\", \n    y = \"Participação da População (%)\",\n    caption = \"Note a mudança de uma população jovem (formato pirâmide) para uma estrutura mais balanceada\"\n  ) +\n  theme_minimal(base_size = 12, base_family = font) +\n  theme(\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_line(linetype = 2, color = \"grey80\"),\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    strip.text = element_text(size = 12, face = \"bold\")\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=768}\n:::\n:::\n\n\n## Comparação Entre Países\n\nVamos comparar diferentes países para ver como as estruturas demográficas variam. Compararemos Brasil (balanceado) com Japão (população envelhecida):\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Comparar diferentes países em 2020\ncountry_comparison <- demo_data |> \n  filter(year == 2020)\n\nggplot(country_comparison, aes(x = age_group, y = share)) +\n  geom_col(aes(fill = sex, color = sex)) +\n  coord_flip() +\n  facet_wrap(~ country) +\n  guides(fill = \"none\", color = \"none\") +\n  geom_hline(yintercept = 0, color = \"black\", linewidth = 0.3) +\n  scale_y_continuous(\n    breaks = seq(-8, 8, 4),\n    labels = c(\"8\", \"4\", \"0\", \"4\", \"8\")\n  ) +\n  scale_color_manual(values = colors) +\n  scale_fill_manual(values = colors) +\n  labs(\n    title = \"Comparação da Estrutura Populacional: 2020\",\n    x = \"Grupo Etário\", \n    y = \"Participação da População (%)\",\n    caption = \"O Brasil mostra estrutura balanceada enquanto o Japão exibe padrão de população envelhecida\"\n  ) +\n  theme_minimal(base_size = 12, base_family = font) +\n  theme(\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_line(linetype = 2, color = \"grey80\"),\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    strip.text = element_text(size = 12, face = \"bold\")\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=768}\n:::\n:::\n\n\n## Comparação por Sobreposição\n\nPara uma comparação mais direta entre períodos, podemos sobrepor diferentes anos usando linhas e barras:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbrazil_overlay <- demo_data |> \n  filter(country == \"Brasil\")\n\nbreaks_share <- seq(-8, 8, 2)\nlabels_share <- c(\"8\", \"6\", \"4\", \"2\", \"0\", \"2\", \"4\", \"6\", \"8\")\n\nggplot() +\n  geom_col(\n    data = filter(brazil_overlay, year == 2020),\n    aes(age_group, share, fill = sex, color = sex),\n    alpha = 0.8\n  ) +\n  geom_step(\n    data = filter(brazil_overlay, year == 1990),\n    aes(age_group, share, group = sex),\n    color = \"black\",\n    alpha = 0.9,\n    linewidth = 1\n  ) +\n  coord_flip() +\n  guides(fill = \"none\", color = \"none\") +\n  scale_y_continuous(\n    breaks = breaks_share,\n    labels = labels_share\n  ) +\n  labs(\n    title = \"Evolução Demográfica do Brasil: 1990 → 2020\",\n    subtitle = \"Linhas pretas mostram estrutura de 1990, barras coloridas mostram estrutura de 2020\",\n    x = \"Grupo Etário\", \n    y = \"Participação da População (%)\"\n  ) +\n  scale_color_manual(values = colors) +\n  scale_fill_manual(values = colors) +\n  theme_minimal(base_size = 12, base_family = font) +\n  theme(\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_line(linetype = 2, color = \"grey80\"),\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 11)\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=768}\n:::\n:::\n\n\n## Trabalhando com Fontes de Dados Brasileiros\n\nPara dados demográficos brasileiros reais, você pode usar várias fontes oficiais:\n\n### IBGE (Instituto Brasileiro de Geografia e Estatística)\n\nO pacote `{sidrar}` fornece acesso ao sistema SIDRA do IBGE:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sidrar)\n\n# Exemplo: População por grupos etários e sexo\n# Tabela 6579 - Estimativas da população por sexo e grupos de idade\ndados_populacao <- sidrar::get_sidra(\n  api = \"/t/6579/n1/all/v/9324/p/last%201/c2/all/c287/all\"\n)\n```\n:::\n\n\n### Usando o Pacote geobr\n\nO pacote `{geobr}` inclui alguns dados demográficos e pode ser combinado com informações do Censo:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(geobr)\n\n# Dados populacionais para municípios podem ser combinados com dados geográficos\n# para criar mapas com informações demográficas\nmunicipios <- read_municipality(year = 2020)\n```\n:::\n\n\n## Principais Insights das Pirâmides Demográficas\n\nAo analisar pirâmides demográficas, procure por estes padrões principais:\n\n1. **População Jovem (Formato Pirâmide)**: Base larga indica altas taxas de natalidade e baixa expectativa de vida\n2. **População Envelhecida (Pirâmide Invertida)**: Base estreita com topo mais largo mostra declínio nas taxas de natalidade e aumento da longevidade\n3. **População Estável (Formato Barril)**: Distribuição relativamente equilibrada entre grupos etários\n4. **Bônus Demográfico**: Pode indicar baby booms, padrões migratórios ou eventos históricos\n\n## Resumo\n\nAs pirâmides demográficas são ferramentas poderosas para visualizar estrutura populacional e entender tendências demográficas. Pontos principais:\n\n- Use esquemas de cores consistentes que evitem estereótipos de gênero\n- Considere comparações temporais e entre países\n- Técnicas de sobreposição podem mostrar efetivamente transições demográficas\n- Dados demográficos brasileiros estão disponíveis através do IBGE via pacote sidrar\n- Sempre forneça rótulos claros e contexto para suas visualizações\n\nA mudança de formatos tradicionais de pirâmide para estruturas mais balanceadas ou até invertidas reflete transições demográficas globais e tem implicações importantes para planejamento de políticas, desenvolvimento econômico e serviços sociais.\n\n---\n\n*Pronto para explorar mais visualizações de dados brasileiros? Confira nosso tutorial sobre [Fontes de Dados Brasileiros](../../../fundamentos-r/dados-brasileiros/index.qmd) ou aprenda sobre [Mapas Interativos](../mapas-coropleticos/index.qmd).*",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}